<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  
    <title>CAPSUL &#8212; CAPSUL - Chain algorithm in pipelines and execute in many contexts</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="../_static/css/bootstrap-responsive.css"/>
  <link rel="icon" href="../_static/capsul_logo.svg"/>

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=f0b81668" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    
    <script src="../_static/documentation_options.js?v=4d935f96"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

  <!-- sidebar -->
  
   
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="../_static/js/bootstrap.min.js" type="application/javascript"></script>

  <script type="application/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    var bodywrapper = $('.bodywrapper');
    var sidebarbutton = $('#sidebarbutton');
    sidebarbutton.css({'height': '900px'});
  </script>

  <div class="header" style="display: inline; width: 80%; margin-left:10%;">
    <a href="../index.html">
    <img src="../_static/capsul_logo.svg" alt="Capsul logo" style="display: inline; height:4em;"/>
    </a >
    <div class="navbar" style="display: inline;">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../installation.html">Installation</a></li>
        <li class="btn-li">
          <div class="btn-group">
            <a href="../documentation.html">Documentation</a>
            <a class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="link-title">CAPSUL</li>
              <li><a href="#">User guide</a></li>
              <li><a href="../api/index.html">API</a></li>
            </ul>
          </div>
        </li>
        <li>
          <!-- form action="search.html" method="get" style="display: inline-block;"></form>
            <input type="text" class="search-header" name="q" placeholder="search documentation..." value=""></input>
            <button type="submit" >search</button>
          </form -->
          <form class="search_box" method="get" action="http://www.google.com/search" style="display: inline-block;">
            <input class="search-header" type="text" name="q" placeholder="search documentation..." />
            <input class="submit" type="image" src="../_static/find_read.png" value="Search" />
            <input type="hidden" name="sitesearch" value="brainvisa.info/capsul" />
          </form>
        </li>
      </ul>
    </div> <!-- end navbar -->
  </div>


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CAPSUL</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">CAPSUL</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="user-guide">
<span id="capsul-guide"></span><h1>User Guide<a class="headerlink" href="#user-guide" title="Link to this heading">¶</a></h1>
<p>The main documentation of all the proposed scripts.</p>
<section id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Link to this heading">¶</a></h2>
<p>Tutorial is available as a <a class="reference external" href="https://jupyter.org/">Jupyter notebook</a> (Jupyter is the new name for <a class="reference external" href="http://ipython.org/notebook.html">IPython notebook</a>).</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="../tutorial/capsul_tutorial.html">See the notebook contents</a></p></li>
<li><p><a class="reference external" href="../_static/tutorial/capsul_tutorial.ipynb">Download notebook</a> (for use with Jupyter)</p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</div></blockquote>
<p>To run it, the following must be done:</p>
<ul>
<li><p><a class="reference internal" href="../installation.html#install-guid"><span class="std std-ref">CAPSUL installation</span></a>.</p></li>
<li><p>have IPython installed.</p></li>
<li><p>run the tutorial ipython notebook server, with Qt GUI support:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter<span class="w"> </span>notebook<span class="w"> </span>--gui<span class="o">=</span>qt<span class="w"> </span>my_tutorial.ipynb
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="running-capsul">
<h2>Running Capsul<a class="headerlink" href="#running-capsul" title="Link to this heading">¶</a></h2>
<section id="running-as-commandline">
<h3>Running as commandline<a class="headerlink" href="#running-as-commandline" title="Link to this heading">¶</a></h3>
<p>CAPSUL has a commandline program to run any process, pipeline, or process iteration. It can be used from a shell, or a script. It allows to run locally, either sequentially or in parallel, or on a remote processing server using Soma-Workflow.</p>
<p>The program is a python module/script:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>&lt;parameters&gt;
</pre></div>
</div>
<p>It can accept a variety of options to control configuration settings, processing modes, iterations, and process parameters either through file names or via attributes and parameters completion system.</p>
<p>To get help, you may run it with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>-h
</pre></div>
</div>
<p><strong>Ex:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>--swf<span class="w"> </span>-i<span class="w"> </span>/home/data/study_data<span class="w"> </span>--studyconfig<span class="w"> </span>/home/data/study_data/study_config.json<span class="w"> </span>-a<span class="w"> </span><span class="nv">subject</span><span class="o">=</span>subjet01<span class="w"> </span>-a<span class="w"> </span><span class="nv">center</span><span class="o">=</span>subjects<span class="w"> </span>morphologist.capsul.morphologist.Morphologist
</pre></div>
</div>
<p>will run the Morphologist pipeline on data located in the directory <code class="docutils literal notranslate"><span class="pre">/home/data/study_data</span></code> using Soma-Workflow on the local computer, for subject <code class="docutils literal notranslate"><span class="pre">subject01</span></code></p>
<p><strong>Ex with iteration:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>--swf<span class="w"> </span>-i<span class="w"> </span>/home/data/study_data<span class="w"> </span>--studyconfig<span class="w"> </span>/home/data/study_data/study_config.json<span class="w"> </span>-a<span class="w"> </span><span class="nv">subject</span><span class="o">=</span><span class="s1">&#39;[&quot;subjet01&quot;, &quot;subject02&quot;, &quot;subject03&quot;]&#39;</span><span class="w"> </span>-a<span class="w"> </span><span class="nv">center</span><span class="o">=</span>subjects<span class="w"> </span>-I<span class="w"> </span>t1mri<span class="w"> </span>morphologist.capsul.morphologist.Morphologist
</pre></div>
</div>
<p>will iterate the same process 3 times, for 3 different subjects.</p>
<p>To work correctly, StudyConfig settings have to be correctly defined in <code class="docutils literal notranslate"><span class="pre">study_config.json</span></code> including FOM completion parameters, external software, formats, etc.</p>
<p>Alternatively, or in addition to attributes, it is possible to pass process parameters as additional options after the process name. They can be passed either as positional arguments (given in the order the process expects), or as “keyword” arguments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>--swf<span class="w"> </span>-i<span class="w"> </span>/home/data/study_data<span class="w"> </span>--studyconfig<span class="w"> </span>/home/data/study_data/study_config.json<span class="w"> </span>-a<span class="w"> </span><span class="nv">subject</span><span class="o">=</span>subjet01<span class="w"> </span>-a<span class="w"> </span><span class="nv">center</span><span class="o">=</span>subjects<span class="w"> </span>morphologist.capsul.morphologist.Morphologist<span class="w"> </span>/home/data/raw_data/subject01.nii.gz<span class="w"> </span><span class="nv">pipeline_steps</span><span class="o">=</span><span class="s1">&#39;{&quot;importation&quot;: True, &quot;orientation&quot;: True}&#39;</span>
</pre></div>
</div>
<p>To get help about a process, its parameters, and available attributes to control its completion:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>--process-help<span class="w"> </span>morphologist.capsul.morphologist.Morphologist
</pre></div>
</div>
<p><strong>Configuration:</strong></p>
<p>Capsul configuration may be specified via the <code class="docutils literal notranslate"><span class="pre">--config</span></code> option, or the older <code class="docutils literal notranslate"><span class="pre">--studyconfig</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>capsul<span class="w"> </span>--config<span class="w"> </span>engine.json<span class="w"> </span>-a<span class="w"> </span><span class="nv">subject</span><span class="o">=</span>subjet01<span class="w"> </span>-a<span class="w"> </span><span class="nv">center</span><span class="o">=</span>subjects<span class="w"> </span>morphologist.capsul.morphologist.Morphologist
</pre></div>
</div>
<p>The config may be imported from BrainVisa/Axon config using the process <code class="docutils literal notranslate"><span class="pre">capsul.engine.write_engine_config</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>axon-runprocess<span class="w"> </span>capsul://capsul.engine.write_engine_config<span class="w"> </span>engine.json
</pre></div>
</div>
</section>
</section>
<section id="xml-specifications">
<h2>XML Specifications<a class="headerlink" href="#xml-specifications" title="Link to this heading">¶</a></h2>
<p>Processes may be functions with XML specifications for their parameters.</p>
<p>Pipelines can be saved and loaded as XML files.</p>
<p><a class="reference internal" href="xml_spec.html"><span class="doc">The specs of XML definitions can be found on this page.</span></a></p>
</section>
<section id="documenting-capsul-processes-and-pipelines-with-sphinx">
<h2>Documenting CAPSUL processes and pipelines with Sphinx<a class="headerlink" href="#documenting-capsul-processes-and-pipelines-with-sphinx" title="Link to this heading">¶</a></h2>
<p>Sphinx documentation can be built automatically for all Capsul processes. See <a class="reference internal" href="../api/sphinxext.html#module-capsul.sphinxext" title="capsul.sphinxext"><code class="xref py py-mod docutils literal notranslate"><span class="pre">capsul.sphinxext</span></code></a>.</p>
<p>Hints may be stored in process classes to point to the documentation. This doc may be accessed through the <code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineDevelopperView</span></code> pipeline viewer (at least). Several mechanisms can be used to find the HTML documentation of a process or node:</p>
<ul class="simple">
<li><p>a <a class="reference internal" href="../api/process.html#capsul.process.process.Process" title="capsul.process.process.Process"><code class="xref py py-class docutils literal notranslate"><span class="pre">Process</span></code></a> or <a class="reference internal" href="../api/pipeline.html#capsul.pipeline.pipeline_nodes.Node" title="capsul.pipeline.pipeline_nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> class (or instance) may contain a <code class="docutils literal notranslate"><span class="pre">_doc_path</span></code> attribute. It points to the HTML document corresponding to the process documentation. The path may be absolute (<code class="docutils literal notranslate"><span class="pre">/path/to/file.html</span></code>), or an URL (<code class="docutils literal notranslate"><span class="pre">https://populse.github.io/capsul/api/pipeline.html#leaveoneoutnode</span></code>), or a relative URL. In the latter case the link is relative to to root of the project documentation, found via the process or node modules hierarchy. See below.</p></li>
<li><p>a module containing processes or nodes docs may contain a <code class="docutils literal notranslate"><span class="pre">_doc_path</span></code> attribute. It can be in any module / package level above the process / node to be documented (it will be searched upwards, starting form the process module). If found it should point to the root directory of the documentation of the project. It may be an absolute path (<code class="docutils literal notranslate"><span class="pre">/path/to/project</span></code>), or an URL (<code class="docutils literal notranslate"><span class="pre">https://populse.github.io/capsul</span></code>). Individual process / node docs will be appended to this prefix.</p></li>
<li><p>If a process or node class does not provide a <code class="docutils literal notranslate"><span class="pre">_doc_path</span></code> attribute, but one is found in one of its parent modules, then the documentation can be looked for, following the organization of the docs auto-generated by <a class="reference internal" href="../api/sphinxext.html#module-capsul.sphinxext" title="capsul.sphinxext"><code class="xref py py-mod docutils literal notranslate"><span class="pre">capsul.sphinxext</span></code></a>.</p></li>
</ul>
<p>If a process HTML documentation is not found, then it may be replaced in documentation browsers with the process help (from its docstring).</p>
</section>
<section id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="advanced_usage.html"><span class="doc">More advanced features can be found on this page.</span></a></p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">User Guide</a><ul>
<li><a class="reference internal" href="#tutorial">Tutorial</a></li>
<li><a class="reference internal" href="#running-capsul">Running Capsul</a><ul>
<li><a class="reference internal" href="#running-as-commandline">Running as commandline</a></li>
</ul>
</li>
<li><a class="reference internal" href="#xml-specifications">XML Specifications</a></li>
<li><a class="reference internal" href="#documenting-capsul-processes-and-pipelines-with-sphinx">Documenting CAPSUL processes and pipelines with Sphinx</a></li>
<li><a class="reference internal" href="#advanced-usage">Advanced usage</a></li>
</ul>
</li>
</ul>

  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CAPSUL</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">CAPSUL</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2023, Populse team &lt;support@brainvisa.info&gt;.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>